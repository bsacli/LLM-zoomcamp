{"text": "If you are trying to run Flask gunicorn & MLFlow server from the same container, defining both in Dockerfile with CMD will only run MLFlow & not Flask.\nSolution: Create separate shell script with server run commands, for eg:\n> \tscript1.sh\n#!/bin/bash\ngunicorn --bind=0.0.0.0:9696 predict:app\nAnother script with e.g. MLFlow server:\n>\tscript2.sh\n#!/bin/bash\nmlflow server -h 0.0.0.0 -p 5000 --backend-store-uri=sqlite:///mlflow.db --default-artifact-root=g3://zc-bucket/mlruns/\nCreate a wrapper script to run above 2 scripts:\n>\twrapper_script.sh\n#!/bin/bash\n# Start the first process\n./script1.sh &\n# Start the second process\n./script2.sh &\n# Wait for any process to exit\nwait -n\n# Exit with status of process that exited first\nexit $?\nGive executable permissions to all scripts:\nchmod +x *.sh\nNow we can define last line of Dockerfile as:\n> \tDockerfile\nCMD ./wrapper_script.sh\nDont forget to expose all ports defined by services!", "section": "Module 4: Deployment", "question": "Running multiple services in a Docker container", "course": "mlops-zoomcamp", "document_id": "e7906e44"}