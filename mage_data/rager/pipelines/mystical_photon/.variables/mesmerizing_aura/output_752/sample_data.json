{"text": "Similar to the one above but with a different solution the main reason is that emacski doesn\u2019t seem to maintain the repo any more, the latest image is from 2 years ago at the time of writing (December 2023)\nProblem:\nWhile trying to run the docker code on Mac M2 apple silicon:\ndocker run --platform linux/amd64 -it --rm \\\n-p 8500:8500 \\\n-v $(pwd)/clothing-model:/models/clothing-model/1 \\\n-e MODEL_NAME=\"clothing-model\" \\\ntensorflow/serving\nYou get an error:\n/usr/bin/tf_serving_entrypoint.sh: line 3:     7 Illegal instruction     tensorflow_model_server --port=8500 --rest_api_port=8501 --model_name=${MODEL_NAME} --model_base_path=${MODEL_BASE_PATH}/${MODEL_NAME} \"$@\"\nSolution:\nUse bitnami/tensorflow-serving base image\nLaunch it either using docker run\ndocker run -d \\\n--name tf_serving \\\n-p 8500:8500 \\\n-p 8501:8501 \\\n-v $(pwd)/clothing-model:/bitnami/model-data/1 \\\n-e TENSORFLOW_SERVING_MODEL_NAME=clothing-model \\\nbitnami/tensorflow-serving:2\nOr the following docker-compose.yaml\nversion: '3'\nservices:\ntf_serving:\nimage: bitnami/tensorflow-serving:2\nvolumes:\n- ${PWD}/clothing-model:/bitnami/model-data/1\nports:\n- 8500:8500\n- 8501:8501\nenvironment:\n- TENSORFLOW_SERVING_MODEL_NAME=clothing-model\nAnd run it with\ndocker compose up\nAdded by Alex Litvinov", "section": "10. Kubernetes and TensorFlow Serving", "question": "Illegal instruction error when running tensorflow/serving image on Mac M2 Apple Silicon (potentially on M1 as well)", "course": "machine-learning-zoomcamp", "document_id": "cccd31cf"}