{"text": "My SSH connection to AWS cannot last more than a few minutes, whether via terminal or VS code.\nMy config:\n# Copy Configuration in local nano editor, then Save it!\nHost mlops-zoomcamp                                         # ssh connection calling name\nUser ubuntu                                             # username AWS EC2\nHostName <instance-public-IPv4-addr>                    # Public IP, it changes when Source EC2 is turned off.\nIdentityFile ~/.ssh/name-of-your-private-key-file.pem   # Private SSH key file path\nLocalForward 8888 localhost:8888                        # Connecting to a service on an internal network from the outside, static forward or set port user forward via on vscode\nStrictHostKeyChecking no\nAdded by Muhammed \u00c7elik\nThe disconnection will occur whether I SSH via WSL2 or via VS Code, and usually occurs after I run some code, i.e. \u201cimport mlflow\u201d, so not particularly intense computation.\nI cannot reconnect to the instance without stopping and restarting with a new IPv4 address.\nI\u2019ve gone through steps listed on this page: https://aws.amazon.com/premiumsupport/knowledge-center/ec2-linux-resolve-ssh-connection-errors/\nInbound rule should allow all incoming IPs for SSH.\nWhat I expect to happen:\nSSH connection should remain while I\u2019m actively using the instance, and if it does disconnect, I should be able to reconnect back.\nSolution: sometimes the hang ups are caused by the instance running out of memory. In one instance, using EC2 feature to view screenshot of the instance as a means to troubleshoot, it was the OS out-of-memory feature which killed off some critical processes. In this case, if we can\u2019t use a higher compute VM with more RAM, try adding a swap file, which uses the disk as RAM substitute and prevents the OOM error. Follow Ubuntu\u2019s documentation here: https://help.ubuntu.com/community/SwapFaq.\nAlternatively follow AWS\u2019s own doc, which mirrors Ubuntu\u2019s: https://aws.amazon.com/premiumsupport/knowledge-center/ec2-memory-swap-file/", "section": "Module 1: Introduction", "question": "AWS EC2 instance constantly drops SSH connection", "course": "mlops-zoomcamp", "document_id": "d43c32ba"}