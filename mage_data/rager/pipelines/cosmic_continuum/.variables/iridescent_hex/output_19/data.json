{"text": "If you get this error, it\u2019s likely that elasticsearch doesn\u2019t get enough RAM\nI specified the RAM size to the configuration (-m 4GB)\ndocker run -it \\\n--rm \\\n--name elasticsearch \\\n-m 4GB \\\n-p 9200:9200 \\\n-p 9300:9300 \\\n-e \"discovery.type=single-node\" \\\n-e \"xpack.security.enabled=false\" \\\ndocker.elastic.co/elasticsearch/elasticsearch:8.4.3\nOr give it _less_ RAM:\nTip for Github Codespace users\nIf you want to run elasticsearch server in a docker, then it may fail with the command in the documentation.\nIn that case, you can try inserting this line -e \"ES_JAVA_OPTS=-Xms512m -Xmx512m\".\nThis reduces the resource usage.\nFull command:\ndocker run -it \\\n--rm \\\n--name elasticsearch \\\n-p 9200:9200 \\\n-p 9300:9300 \\\n-e \"discovery.type=single-node\" \\\n-e \"xpack.security.enabled=false\" \\\n-e \"ES_JAVA_OPTS=-Xms512m -Xmx512m\" \\\ndocker.elastic.co/elasticsearch/elasticsearch:8.4.3\nIf it doesn't work, try this:\nsudo sysctl -w vm.max_map_count=262144\nAnd give the Java machine inside the container more RAM:\ndocker run -it \\\n--rm \\\n--name elasticsearch \\\n-p 9200:9200 \\\n-p 9300:9300 \\\n--ulimit nofile=65536:65536 \\\n--ulimit memlock=-1:-1 \\\n--memory=4g \\\n--cpus=2 \\\n-e \"discovery.type=single-node\" \\\n-e \"xpack.security.enabled=false\" \\\n-e \"ES_JAVA_OPTS=-Xms2g -Xmx2g\" \\\ndocker.elastic.co/elasticsearch/elasticsearch:8.4.3\nAnother possible solution may be to set the memory_lock to false:\ndocker run -it \\\n--rm \\\n--name elasticsearch \\\n-p 9200:9200 \\\n-p 9300:9300 \\\n-e \"discovery.type=single-node\" \\\n-e \"xpack.security.enabled=false\" \\\n-e \"ES_JAVA_OPTS=-Xms512m -Xmx512m\" \\\n-e \"bootstrap.memory_lock=false\" \\\ndocker.elastic.co/elasticsearch/elasticsearch:8.4.3", "section": "Module 1: Introduction", "question": "ElasticSearch: ERROR: Elasticsearch exited unexpectedly", "course": "llm-faq-v1", "document_id": "d298b3b8"}