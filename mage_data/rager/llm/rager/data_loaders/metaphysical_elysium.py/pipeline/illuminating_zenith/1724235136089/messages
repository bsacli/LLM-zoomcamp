{"result_id": "346fe4e4d9d946238d41098ba7f6a8fd", "data_type": null, "error": {"code": "from elasticsearch import Elasticsearch, exceptions\nfrom mage_ai.data_preparation.decorators import data_exporter\n\n@data_exporter\ndef test_retrieval(*args, **kwargs):\n    index_name = kwargs.get('index_name', 'documents_20240821_5016')\n    query = kwargs.get('query', 'When is the next cohort?')\n    connection_string = kwargs.get('connection_string', 'http://localhost:9200')\n    \n    es_client = Elasticsearch([connection_string])\n    \n    search_query = {\n        \"size\": 1,\n        \"query\": {\n            \"match\": {\n                \"text\": query\n            }\n        }\n    }\n    \n    try:\n        response = es_client.search(\n            index=index_name,\n            body=search_query\n        )\n        \n        if response['hits']['hits']:\n            top_result = response['hits']['hits'][0]\n            return top_result['_id']\n        else:\n            return \"No results found.\"\n    \n    except exceptions.NotFoundError as e:\n        return f\"IndexNotFoundError: {e.info}\"\n    except exceptions.RequestError as e:\n        return f\"RequestError: {e.info}\"\n    except exceptions.TransportError as e:\n        return f\"TransportError: {e.info}\"\n    except Exception as e:\n        return f\"Unexpected error: {e}\"\n", "code_context": [], "code_context_formatted": [], "error": "Block metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.", "errors": null, "exception": "Exception: Block metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.", "line_number": 1747, "message": "Block metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.", "message_formatted": "Block metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.", "stacktrace": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/execution.py\", line 281, in execute_code_async\n    local_variables = await __modify_and_execute(\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/execution.py\", line 135, in __modify_and_execute\n    raise error\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/execution.py\", line 117, in __modify_and_execute\n    res = await res\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/environments/setup_helpers.py\", line 48, in execute\n    await block.execute(\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 1711, in execute\n    await loop.run_in_executor(\n", "  File \"/usr/local/lib/python3.10/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 1688, in execute_sync\n    return __execute()\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 1665, in __execute\n    raise err\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 1567, in __execute\n    output = self.execute_block(\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 1912, in execute_block\n    outputs = self._execute_block(\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 2063, in _execute_block\n    block_function = self._validate_execution(decorated_functions, input_vars)\n", "  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\", line 1747, in _validate_execution\n    raise Exception(\n", "Exception: Block metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.\n"], "stacktrace_formatted": ["\u001b[91mTraceback (most recent call last):\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/execution.py\"\u001b[0m, \u001b[36mline 281\u001b[0m, \u001b[35min execute_code_async\n    local_variables = await __modify_and_execute(\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/execution.py\"\u001b[0m, \u001b[36mline 135\u001b[0m, \u001b[35min __modify_and_execute\n    raise error\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/execution.py\"\u001b[0m, \u001b[36mline 117\u001b[0m, \u001b[35min __modify_and_execute\n    res = await res\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/kernels/magic/environments/setup_helpers.py\"\u001b[0m, \u001b[36mline 48\u001b[0m, \u001b[35min execute\n    await block.execute(\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 1711\u001b[0m, \u001b[35min execute\n    await loop.run_in_executor(\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/concurrent/futures/thread.py\"\u001b[0m, \u001b[36mline 58\u001b[0m, \u001b[35min run\n    result = self.fn(*self.args, **self.kwargs)\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 1688\u001b[0m, \u001b[35min execute_sync\n    return __execute()\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 1665\u001b[0m, \u001b[35min __execute\n    raise err\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 1567\u001b[0m, \u001b[35min __execute\n    output = self.execute_block(\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 1912\u001b[0m, \u001b[35min execute_block\n    outputs = self._execute_block(\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 2063\u001b[0m, \u001b[35min _execute_block\n    block_function = self._validate_execution(decorated_functions, input_vars)\n\u001b[0m", "\u001b[34m  File \"/usr/local/lib/python3.10/site-packages/mage_ai/data_preparation/models/block/__init__.py\"\u001b[0m, \u001b[36mline 1747\u001b[0m, \u001b[35min _validate_execution\n    raise Exception(\n\u001b[0m", "\u001b[90mException: Block metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.\n\u001b[0m", "\u001b[91mBlock metaphysical_elysium does not have any decorated functions. Make sure that a function in the block is decorated with @data_loader.\u001b[0m"], "type": "Exception"}, "metadata": null, "output": null, "process": {"data": [], "exitcode": null, "is_alive": false, "internal_state": "INIT", "kernel_uuid": "metaphysical_elysium", "message": "from elasticsearch import Elasticsearch, exceptions\nfrom mage_ai.data_preparation.decorators import data_exporter\n\n@data_exporter\ndef test_retrieval(*args, **kwargs):\n    index_name = kwargs.get('index_name', 'documents_20240821_5016')\n    query = kwargs.get('query', 'When is the next cohort?')\n    connection_string = kwargs.get('connection_string', 'http://localhost:9200')\n    \n    es_client = Elasticsearch([connection_string])\n    \n    search_query = {\n        \"size\": 1,\n        \"query\": {\n            \"match\": {\n                \"text\": query\n            }\n        }\n    }\n    \n    try:\n        response = es_client.search(\n            index=index_name,\n            body=search_query\n        )\n        \n        if response['hits']['hits']:\n            top_result = response['hits']['hits'][0]\n            return top_result['_id']\n        else:\n            return \"No results found.\"\n    \n    except exceptions.NotFoundError as e:\n        return f\"IndexNotFoundError: {e.info}\"\n    except exceptions.RequestError as e:\n        return f\"RequestError: {e.info}\"\n    except exceptions.TransportError as e:\n        return f\"TransportError: {e.info}\"\n    except Exception as e:\n        return f\"Unexpected error: {e}\"\n", "message_request_uuid": "1724235136089", "message_uuid": "5c43aa35c58841b396fc7601d414b897", "output_manager": {"namespace": "pipeline/illuminating_zenith", "path": "llm/rager/data_loaders/metaphysical_elysium.py", "uuid": "1724235136089"}, "pid": "5c43aa35c58841b396fc7601d414b897", "pid_spawn": null, "source": "metaphysical_elysium", "stream": "code_executions", "timestamp": null, "timestamp_end": null, "uuid": "metaphysical_elysium"}, "status": "error", "type": "status", "uuid": "metaphysical_elysium", "timestamp": 1724235136107, "output_text": null}
{"result_id": "2ae321a5aeb7436aa19ebd27e4d09e64", "data_type": null, "error": null, "metadata": {"namespace": "pipeline/illuminating_zenith", "path": "llm/rager/data_loaders/metaphysical_elysium.py", "uuid": "1724235136089", "block_type": "data_loader", "block_uuid": "metaphysical_elysium", "execution_partition": null, "pipeline_uuid": "illuminating_zenith"}, "output": "", "process": {"data": [], "exitcode": null, "is_alive": false, "internal_state": "INIT", "kernel_uuid": "metaphysical_elysium", "message": "from elasticsearch import Elasticsearch, exceptions\nfrom mage_ai.data_preparation.decorators import data_exporter\n\n@data_exporter\ndef test_retrieval(*args, **kwargs):\n    index_name = kwargs.get('index_name', 'documents_20240821_5016')\n    query = kwargs.get('query', 'When is the next cohort?')\n    connection_string = kwargs.get('connection_string', 'http://localhost:9200')\n    \n    es_client = Elasticsearch([connection_string])\n    \n    search_query = {\n        \"size\": 1,\n        \"query\": {\n            \"match\": {\n                \"text\": query\n            }\n        }\n    }\n    \n    try:\n        response = es_client.search(\n            index=index_name,\n            body=search_query\n        )\n        \n        if response['hits']['hits']:\n            top_result = response['hits']['hits'][0]\n            return top_result['_id']\n        else:\n            return \"No results found.\"\n    \n    except exceptions.NotFoundError as e:\n        return f\"IndexNotFoundError: {e.info}\"\n    except exceptions.RequestError as e:\n        return f\"RequestError: {e.info}\"\n    except exceptions.TransportError as e:\n        return f\"TransportError: {e.info}\"\n    except Exception as e:\n        return f\"Unexpected error: {e}\"\n", "message_request_uuid": "1724235136089", "message_uuid": "5c43aa35c58841b396fc7601d414b897", "output_manager": {"namespace": "pipeline/illuminating_zenith", "path": "llm/rager/data_loaders/metaphysical_elysium.py", "uuid": "1724235136089"}, "pid": "5c43aa35c58841b396fc7601d414b897", "pid_spawn": null, "source": "metaphysical_elysium", "stream": "code_executions", "timestamp": null, "timestamp_end": null, "uuid": "metaphysical_elysium"}, "status": "success", "type": "output", "uuid": "metaphysical_elysium", "timestamp": 1724235136155, "output_text": ""}
