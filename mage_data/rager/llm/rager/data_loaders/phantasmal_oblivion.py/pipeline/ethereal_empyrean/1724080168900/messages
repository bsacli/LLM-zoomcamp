{"result_id": "1894bddbec814798a42380d4312f93f8", "data_type": null, "error": null, "metadata": {"namespace": "pipeline/ethereal_empyrean", "path": "llm/rager/data_loaders/phantasmal_oblivion.py", "uuid": "1724080168900", "block_type": "data_loader", "block_uuid": "phantasmal_oblivion", "execution_partition": null, "pipeline_uuid": "ethereal_empyrean"}, "output": "", "process": {"data": [], "exitcode": null, "is_alive": false, "internal_state": "INIT", "kernel_uuid": "phantasmal_oblivion", "message": "import requests\nimport json\nfrom typing import List, Dict\n\nfrom mage_ai.shared.hash import dig\nif 'data_loader' not in globals():\n    from mage_ai.data_preparation.decorators import data_loader\nif 'test' not in globals():\n    from mage_ai.data_preparation.decorators import test\n\n\n@data_loader\ndef ingest_api_data(*args, **kwargs) -> List[Dict]:\n    \"\"\"\n    Template for loading data from an API.\n    Fetch data from external API using the provided configurations.\n\n    Args:\n        *args: Variable length argument list.\n        **kwargs: Arbitrary keyword arguments.\n\n    Keyword Args:\n        endpoint (str): API endpoint URL.\n        auth_token (str): Authentication token for the API.\n        method (str): HTTP method to use (GET, POST, etc.).\n        timeout (int): Request timeout in seconds.\n    \"\"\"\n    endpoint = kwargs.get('endpoint')\n    auth_token = kwargs.get('auth_token')\n    method = kwargs.get('method', 'GET')\n    timeout = kwargs.get('timeout', 30)\n    parser = kwargs.get('parser')\n\n    headers = {}\n    if auth_token:\n        headers['Authorization'] = f\"Bearer {auth_token}\"\n\n    response = requests.request(\n        method=method,\n        url=endpoint or  '',\n        headers=headers,\n        timeout=timeout\n    )\n    response.raise_for_status()\n    result = response.json()\n\n    if parser:\n        result = dig(result, parser)\n\n    return [result]\n\n\n@test\ndef test_output(output, *args) -> None:\n    \"\"\"\n    Template code for testing the output of the block.\n    \"\"\"\n    assert output is not None, 'The output is undefined'", "message_request_uuid": "1724080168900", "message_uuid": "1959aae6f62c497b978d8890eb29280a", "output_manager": {"namespace": "pipeline/ethereal_empyrean", "path": "llm/rager/data_loaders/phantasmal_oblivion.py", "uuid": "1724080168900"}, "pid": "1959aae6f62c497b978d8890eb29280a", "pid_spawn": null, "source": "phantasmal_oblivion", "stream": "code_executions", "timestamp": null, "timestamp_end": null, "uuid": "phantasmal_oblivion"}, "status": "success", "type": "output", "uuid": "phantasmal_oblivion", "timestamp": 1724080176081, "output_text": ""}
